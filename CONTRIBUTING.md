# Contributing to mol-mcp

## Adding a tool MCP server

MCP servers are implemented using [FastMCP](https://gofastmcp.com/getting-started/welcome). There are three functionalities of the MCP server: tools, resources, and prompts.

- Tools are used for generating information beyond the capabilities of the LLM.
- Resources are used for providing read-only information either statically or dynamically generated by the server.
- Prompts are preformatted user instructions.

You can add new tools by creating a directory under `src/molmcp/tools/`. Using `smiley-mcp` as an example, the general structure is as follows:

``` sh
smileymcp
├── __init__.py
├── server.py
├── smileslib
└── tools.py
```

- `server.py` contains server construction and `main()` entry point
- `tools.py` contains tool definitions and tool registry function
- `smileslib` is a submodule and contains all of the actual logic behind the tool definitions

After adding the server, add the entry point under `[project.scripts]` in the `pyproject.toml`.

```toml
[project.scripts]
sm-mcp = "molmcp.tools.smileymcp.server:main"
```

Then, you can run your server via `uv run`.
```sh
uv run sm-mcp
```

## Adding an agent

Agents are implemented using [fast-agent](https://fast-agent.ai/agents/defining/).
Agents can be run in an interactive mode with a command line interface or as an MCP server themselves which other clients can call.

You can add a new agent by creating a new directory under `src/mcpmol/agents`.
See `mcpmol/agents/example` for a reference setup, but this example is far from a full showing of fast-agent's workflow and multi-agent capabilties. At this point, the agent definitions look like this:

``` sh
example
├── agent.py
└── config.yaml
```

MCP servers are configured using the `config.yaml`. The example `agent.py` just implements a multi-step tool calling agent.

Since fast-agents need to be run with `asyncio`, we don't add the agent entry point as a script in `pyproject.toml` as directly as we did before. So, we have a CLI in `src/molmcp/__main__.py`.

Add your agent script at the top of that file and give it a short name,

```python
AGENTS = {
    "example": "molmcp.agents.example.agent"
}
```

Then, you can run your agent using the entry point

```sh
uv run agent example
```
